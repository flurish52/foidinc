import{s as g,u as U,B as E,g as d,o as r,b as e,i as k,G as T,n as V,e as j,t as h,F as C,p as $,k as S,m as B,f as A,H as b,q as H,y as L,j as N,c as M,w as R,z}from"./app-DucrWc5X.js";import{_ as P,a as I}from"./RecentNews-CTIeRfCz.js";import{_ as G}from"./AuthenticatedLayout-BXctQaKI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"w-full mx-auto px-6 space-y-6"},q={key:0,class:"space-y-4"},J={class:"flex items-center justify-between"},W={class:"text-lg font-semibold text-gray-700"},K={class:"grid gap-4"},Q={class:"flex-shrink-0"},X=["src"],Y={class:"flex-1 space-y-3"},Z=["onUpdate:modelValue"],ee={class:"flex gap-2"},te=["onClick","disabled"],se=["onClick","disabled"],oe=["onClick"],le={class:"pt-4 border-t border-gray-200"},ae=["disabled"],re={key:0,xmlns:"http://www.w3.org/2000/svg",class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},ie={__name:"HeroSectionSlider",setup(D){const l=g([]),s=g(null),p=g(!1),c=g(!1);U({sliders:[]});const m=()=>s.value.click(),v=o=>{Array.from(o.target.files).forEach(u=>_(u))},y=o=>{p.value=!1,Array.from(o.dataTransfer.files).forEach(u=>{u.type.startsWith("image/")&&_(u)})},_=o=>{const t=new FileReader;t.onload=()=>{l.value.unshift({file:o,preview:t.result,text:""})},t.readAsDataURL(o)},a=o=>{l.value.splice(o,1)},i=o=>{if(o===0)return;const t=l.value[o];l.value.splice(o,1),l.value.splice(o-1,0,t)},n=o=>{if(o===l.value.length-1)return;const t=l.value[o];l.value.splice(o,1),l.value.splice(o+1,0,t)},w=async()=>{try{const o=await b.get("/hero/slider");o.status===200&&o.data.sliders&&(l.value=o.data.sliders.slice().reverse().map(t=>({image:t.image,text:t.text||"",preview:`/storage/${t.image}`})))}catch(o){console.error(o)}},F=async()=>{c.value=!0;const o=new FormData;l.value.forEach((t,u)=>{t.file?o.append(`sliders[${u}][image]`,t.file):t.image&&o.append(`sliders[${u}][image]`,t.image),o.append(`sliders[${u}][text]`,t.text||"")});try{await b.post("/hero/slider/edit",o,{headers:{"Content-Type":"multipart/form-data"}}),w()}catch(t){console.error(t)}finally{c.value=!1}};return E(()=>{w()}),(o,t)=>(r(),d("div",O,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Hero Slider Editor",-1)),e("div",{onClick:m,onDragover:t[0]||(t[0]=j(u=>p.value=!0,["prevent"])),onDragleave:t[1]||(t[1]=u=>p.value=!1),onDrop:j(y,["prevent"]),class:V([{"border-blue-500 bg-blue-50":p.value,"border-gray-300 bg-gray-50":!p.value},"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors duration-200"])},[e("input",{type:"file",ref_key:"fileInput",ref:s,onChange:v,multiple:"",accept:"image/*",class:"hidden"},null,544),t[2]||(t[2]=T('<div class="flex flex-col items-center justify-center space-y-3"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg><p class="text-lg font-medium text-gray-700"> Drag &amp; drop images here or click to browse </p><p class="text-sm text-gray-500"> Recommended size: 1600Ã—600px (JPEG, PNG) </p></div>',1))],34),l.value.length?(r(),d("div",q,[e("div",J,[e("h2",W,"Slides ("+h(l.value.length)+")",1),t[3]||(t[3]=e("span",{class:"text-sm text-gray-500"},"Drag to reorder or use arrows",-1))]),e("div",K,[(r(!0),d(C,null,$(l.value,(u,f)=>(r(),d("div",{key:f,class:"relative bg-white rounded-lg border border-gray-200 p-4 flex gap-4 items-start shadow-sm hover:shadow-md transition-shadow duration-200"},[e("div",Q,[e("img",{src:u.preview||`/storage/${u.image}`,class:"w-32 h-20 object-cover rounded-md border border-gray-200"},null,8,X)]),e("div",Y,[S(e("input",{"onUpdate:modelValue":x=>u.text=x,type:"text",placeholder:"Enter caption text (optional)",class:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},null,8,Z),[[B,u.text]]),e("div",ee,[e("button",{onClick:x=>i(f),disabled:f===0,class:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md border border-gray-300 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Move Up ",8,te),e("button",{onClick:x=>n(f),disabled:f===l.value.length-1,class:"px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md border border-gray-300 hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Move Down ",8,se)])]),e("button",{onClick:x=>a(f),class:"absolute top-3 right-3 bg-white text-gray-400 hover:text-red-500 p-1 rounded-full border border-gray-200 hover:border-red-300 shadow-sm transition-colors"},[...t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,oe)]))),128))])])):k("",!0),e("div",le,[e("button",{onClick:F,disabled:c.value||l.value.length===0,class:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center"},[c.value?(r(),d("svg",re,[...t[5]||(t[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):k("",!0),A(" "+h(c.value?"Saving Changes...":"Save Slides"),1)],8,ae)])]))}},ne={class:"py-6 max-w-5xl mx-auto space-y-6"},de={class:"flex gap-3 items-center border p-4 rounded"},ue=["value"],ce=["src"],pe=["src"],ve={key:0,class:"space-y-3"},ge={class:"flex items-center gap-4"},me=["src"],fe={class:"font-medium"},he={class:"text-sm text-gray-500"},be={class:"flex gap-2"},ye=["onClick"],_e=["onClick"],we={__name:"MinistriesAndProgramsEditor",setup(D){const l=g([]),s=g({title:"",page_id:"",file:null,preview:""});E(async()=>{const a=await b.get("/projects");l.value=a.data.cards});const p=a=>{const i=a.target.files[0];i&&(s.value.file=i,s.value.preview=URL.createObjectURL(i))},c=async()=>{if(!s.value.title||!s.value.page_id)return;const a=new FormData;a.append("title",s.value.title),a.append("page_id",s.value.page_id),s.value.file&&a.append("thumbnail",s.value.file);const i=await b.post("/project/store",a,{headers:{"Content-Type":"multipart/form-data"}});l.value=i.data.cards,s.value={title:"",page_id:"",file:null,preview:""}},m=g(null),v=a=>{m.value=a.id,s.value.id=a.id,s.value.title=a.title,s.value.page_id=a.page?.id,s.value.preview=a.thumbnail,s.value.thumbnail=null},y=()=>{U({id:s.value.id,title:s.value.title,page_id:s.value.page_id,thumbnail:s.value.thumbnail}).post(route("projects.update",s.value.id),{forceFormData:!0,onSuccess:()=>{m.value=null,s.value={id:null,title:"",page_id:"",thumbnail:null,preview:null},L.visit(window.location.href,{preserveScroll:!0})}})},_=async a=>{await b.delete(`/project/${a}`),l.value=l.value.filter(i=>i.id!==a)};return(a,i)=>(r(),d("section",ne,[e("div",de,[S(e("input",{"onUpdate:modelValue":i[0]||(i[0]=n=>s.value.title=n),placeholder:"Card Title",class:"border p-2 rounded flex-1"},null,512),[[B,s.value.title]]),S(e("select",{"onUpdate:modelValue":i[1]||(i[1]=n=>s.value.page_id=n),class:"border p-2 rounded flex-1"},[i[3]||(i[3]=e("option",{value:""},"Select Page",-1)),(r(!0),d(C,null,$(a.$page.props.links,n=>(r(),d("option",{key:n.id,value:n.id},h(n.title),9,ue))),128))],512),[[H,s.value.page_id]]),e("input",{type:"file",onChange:p,ref:"fileInput",class:"hidden"},null,544),e("button",{onClick:i[2]||(i[2]=n=>a.$refs.fileInput.click()),class:"px-2 py-1 bg-gray-200 rounded"},"Upload"),s.value.preview&&m.value===null?(r(),d("img",{key:0,src:s.value.preview,class:"w-16 h-16 object-cover rounded"},null,8,ce)):(r(),d("img",{key:1,src:`/storage/${s.value.preview}`,class:"w-16 h-16 object-cover rounded"},null,8,pe)),m.value===null?(r(),d("button",{key:2,onClick:c,class:"px-3 py-1 bg-indigo-600 text-white rounded"}," Add ")):(r(),d("button",{key:3,onClick:y,class:"px-3 py-1 bg-indigo-600 text-white rounded"},"update"))]),l.value?.length?(r(),d("div",ve,[(r(!0),d(C,null,$(l.value,n=>(r(),d("div",{key:n.id,class:"flex items-center justify-between border p-4 rounded"},[e("div",ge,[n.thumbnail?(r(),d("img",{key:0,src:"/storage/"+n.thumbnail,class:"w-16 h-16 object-cover rounded"},null,8,me)):k("",!0),e("div",null,[e("p",fe,h(n.title),1),e("p",he,h(n.page?.title),1)])]),e("div",be,[e("button",{onClick:w=>v(n),class:"px-3 py-1 bg-blue-500 text-white rounded"},"Edit",8,ye),e("button",{onClick:w=>_(n.id),class:"px-3 py-1 bg-red-500 text-white rounded"},"Delete",8,_e)])]))),128))])):k("",!0)]))}},xe={class:"flex gap-4"},ke={class:"w-48 bg-white border border-gray-200 p-4 space-y-2"},Ce=["onClick"],$e={class:"flex-1 p-4 bg-gray-50 rounded"},Ue={__name:"EditHome",setup(D){const l=[{id:"sliders",title:"Sliders",component:ie},{id:"ministries",title:"Ministries and Programs",component:we},{id:"reading",title:"Today's Reading",component:P},{id:"news",title:"New from Vatican",component:I}],s=g("sliders"),p=N(()=>l.find(c=>c.id===s.value)?.component);return(c,m)=>(r(),M(G,null,{default:R(()=>[e("div",xe,[e("div",ke,[(r(),d(C,null,$(l,v=>e("button",{key:v.id,onClick:y=>s.value=v.id,class:V([{"bg-blue-500 text-white":s.value===v.id,"bg-gray-100 text-gray-700":s.value!==v.id},"w-full text-left px-3 py-2 rounded transition-colors"])},h(v.title),11,Ce)),64))]),e("div",$e,[(r(),M(z(p.value)))])])]),_:1}))}};export{Ue as default};
