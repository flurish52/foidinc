import{Q as _,g as r,o as n,p as v,F as d,b as t,c,i as f,t as p,N as h,u as S,s as P,w as F,e as N,k as b,d as u,m as U,q as C}from"./app-DucrWc5X.js";import{_ as D}from"./AuthenticatedLayout-BXctQaKI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T=["value"],B={__name:"PageOptions",props:{children:{type:Array,required:!0},prefix:{type:String,default:""}},setup(i){return(g,y)=>{const a=_("PageOptions",!0);return n(!0),r(d,null,v(i.children,l=>(n(),r(d,{key:l.id},[t("option",{value:l.id},p(i.prefix)+p(l.title),9,T),l.children&&l.children.length?(n(),c(a,{key:0,children:l.children,prefix:i.prefix+"-- "},null,8,["children","prefix"])):f("",!0)],64))),128)}}},M={class:"p-6"},V={key:0,class:"mb-4 p-3 bg-green-100 text-green-700 rounded"},$=["value"],E={__name:"UploadNewLetters",setup(i){const{props:g}=h();g.pages;const a=new Date().toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),l=S({title:a,page_id:"",file:null}),o=P(""),x=m=>{l.file=m.target.files[0]},w=()=>{l.post(route("newsletters.store"),{onSuccess:()=>{o.value="Newsletter uploaded successfully.",k(),setTimeout(()=>{o.value=""},3e3)},onError:()=>{o.value="Something went wrong. Please try again.",setTimeout(()=>{o.value=""},3e3)}})},k=()=>{l.reset(),l.title=a};return(m,e)=>(n(),c(D,null,{default:F(()=>[t("div",M,[e[7]||(e[7]=t("h1",{class:"text-xl font-bold mb-4"},"Upload Newsletter",-1)),o.value?(n(),r("div",V,p(o.value),1)):f("",!0),t("form",{onSubmit:N(w,["prevent"]),class:"space-y-4"},[t("div",null,[e[2]||(e[2]=t("label",{class:"block mb-1 font-medium"},"Title",-1)),b(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>u(l).title=s),type:"text",class:"w-full border rounded p-2"},null,512),[[U,u(l).title]])]),t("div",null,[e[4]||(e[4]=t("label",{class:"block mb-1 font-medium"},"Select Page",-1)),b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>u(l).page_id=s),class:"w-full border rounded p-2"},[e[3]||(e[3]=t("option",{value:""},"-- Choose a Page --",-1)),(n(!0),r(d,null,v(m.$page.props.links,s=>(n(),r(d,{key:s.id},[t("option",{value:s.id},p(s.title),9,$),s.children&&s.children.length?(n(),c(B,{key:0,children:s.children,prefix:"-"},null,8,["children"])):f("",!0)],64))),128))],512),[[C,u(l).page_id]])]),t("div",null,[e[5]||(e[5]=t("label",{class:"block mb-1 font-medium"},"PDF File",-1)),t("input",{type:"file",onChange:x,accept:"application/pdf"},null,32)]),e[6]||(e[6]=t("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded"}," Upload ",-1))],32)])]),_:1}))}};export{E as default};
